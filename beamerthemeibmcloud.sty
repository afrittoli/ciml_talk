\mode<presentation>

% Requirement
\RequirePackage{tikz}
\RequirePackage{textpos}
\RequirePackage{fontspec}
\RequirePackage{listingsutf8}
\RequirePackage{color}

% Settings
\useinnertheme{ibmcloud}
\useoutertheme{ibmcloud}
\usecolortheme{ibmcloud}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{blocks}[rounded=false, shadow=false]

% Custom Frames
\newenvironment{blackframe}
{
  \setbeamercolor{background canvas}{bg=ibmblack}
  \setbeamercolor{palette primary}{fg=white}
  \setbeamercolor{titlelike}{fg=white}
  \setbeamercolor{normal text}{fg=white}
  \setbeamercolor{frametitle}{fg=white}
  \setbeamercolor{author}{fg=white}
  \setbeamercolor*{footline}{fg=white}
  \usebeamercolor[fg]{normal text}
  \begin{frame}[t]
}
{
  \end{frame}
}

\newenvironment{grayframe}
{
  \setbeamercolor{background canvas}{bg=ibmlightgray}
  \setbeamercolor*{footline}{fg=ibmblack}
  \setbeamercolor{title}{fg=ibmblack}
  \setbeamercolor{normal text}{fg=ibmblack}
  \setbeamercolor{frametitle}{fg=ibmblack}
  \begin{frame}[t]
}
{
  \end{frame}
}

\newenvironment{lgrayrwhiteframe}
{
  \setbeamercolor{background canvas}{bg=ibmlightgray}
  \setbeamercolor*{footline}{fg=ibmblack}
  \setbeamercolor{title}{fg=ibmblack}
  \setbeamercolor{normal text}{fg=ibmblack}
  \setbeamercolor{frametitle}{fg=ibmblack}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=white] (0.5\paperwidth, 0) rectangle (\the\paperwidth, \the\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}

\newenvironment{lblackrwhiteframe}
{
  \setbeamercolor{background canvas}{bg=ibmblack}
  \setbeamercolor*{footline}{fg=white}
  \setbeamercolor{title}{fg=white}
  \setbeamercolor{normal text}{fg=white}
  \setbeamercolor{frametitle}{fg=white}
  \setbeamercolor{itemize item}{fg=white}
  \setbeamercolor{item}{fg=white}
  \setbeamercolor{subitem}{fg=white}
  \setbeamercolor{block body}{fg=white}
  \usebeamercolor[fg]{normal text}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=white] (0.5\paperwidth, 0) rectangle (\the\paperwidth, \the\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}

\newenvironment{2columnsframe}[2]
{
  \begin{frame}[t]
    \vspace{5pt}
    \begin{columns}[T,totalwidth=\textwidth]
      \column{0.5\textwidth}
        #1
      \column{0.5\textwidth}
        #2
    \end{columns}
}
{
  \end{frame}
}

\newenvironment{3columnsframe}[3]
{
  \begin{frame}[t]
    \vspace{30pt}
    \begin{columns}[T,totalwidth=\textwidth]
      \column{0.33\textwidth}
        #1
      \column{0.33\textwidth}
        #2
      \column{0.33\textwidth}
        #3
    \end{columns}
}
{
  \end{frame}
}


\newenvironment{sectionpic}[2]
{
  \setbeamertemplate{background}{
    \includegraphics[width=\paperwidth,height=\paperheight]{img/jnation_section_background.png}
  }
  \setbeamercolor*{footline}{fg=white}
  \setbeamercolor*{section name}{fg=white}
  \setbeamercolor*{section title}{fg=white}
  \setbeamercolor*{frametitle}{fg=white}
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(1.5cm,0.34cm)
      \begin{beamercolorbox}[wd=0.5\paperwidth]{title page header}
        \usebeamerfont{title}\Huge---\par%
      \end{beamercolorbox}%
      \begin{beamercolorbox}[wd=0.35\paperwidth]{title page header}
        \usebeamerfont{title}\Huge#1%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}%
    \begin{textblock*}{0.45\paperwidth}(0.4\paperwidth,0.3\paperheight)
      \includegraphics[width=0.45\paperwidth]{#2}
    \end{textblock*}
    \begin{textblock*}{0.2\paperwidth}(0.78\paperwidth,0.80\paperheight)
      \includegraphics[width=0.017\paperwidth]{img/cc.png}
      \includegraphics[width=0.017\paperwidth]{img/zero.png}
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment{centraldark}[1]
{
  % \setbeamertemplate{background canvas}{%
  %   \begin{tikzpicture}[remember picture,overlay]
  %     \node [rectangle, left color=jnationredlight, right color=jnationred, anchor=north, minimum width=\paperwidth, minimum height=\paperheight] (box) at (current page.north){};
  %   \end{tikzpicture}%
  % }
  \setbeamercolor*{footline}{fg=white}
  \setbeamercolor*{section name}{fg=white}
  \setbeamercolor*{section title}{fg=white}
  \setbeamercolor*{frametitle}{fg=white}
  \begin{frame}[plain]
    \begin{textblock*}{\paperwidth}(0.32cm,0.40\paperheight)
      \begin{beamercolorbox}[wd=0.98\paperwidth]{title page header}
        \begin{centering}
        \usebeamerfont{title}\Huge#1\par%
        \end{centering}
      \end{beamercolorbox}%
    \end{textblock*}%
}
{
  \end{frame}
}

\newenvironment{stripedframe}[4]
{
  \setbeamercolor*{footline}{fg=white}
  \setbeamercolor{title}{fg=white}
  \setbeamercolor{normal text}{fg=white}
  \setbeamercolor{frametitle}{fg=white}
  \setbeamercolor{itemize item}{fg=white}
  \setbeamercolor{item}{fg=white}
  \setbeamercolor{subitem}{fg=white}
  \setbeamercolor{block body}{fg=white}
  \usebeamercolor[fg]{normal text}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=ibmblack] (0, 0) rectangle (0.25\paperwidth, \the\paperheight);
        \fill[color=ibmblue] (0.25\paperwidth, 0) rectangle (0.50\paperwidth, \the\paperheight);
        \fill[color=ibmteal] (0.50\paperwidth, 0) rectangle (0.75\paperwidth, \the\paperheight);
        \fill[color=ibmgray] (0.75\paperwidth, 0) rectangle (\the\paperwidth, \the\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
    \vspace{5pt}
    \begin{columns}[T,totalwidth=0.98\textwidth]
      \column{0.20\textwidth}
        #1
      \column{0.20\textwidth}
        #2
      \column{0.20\textwidth}
        #3
      \column{0.20\textwidth}
        #4
    \end{columns}
}
{
  \end{frame}
}

% top black bottom white
\newenvironment{tblackbgrayframe}
{
  \setbeamercolor{background canvas}{bg=ibmlightgray}
  \setbeamercolor*{footline}{fg=ibmblack}
  \setbeamercolor{title}{fg=white}
  \setbeamercolor{normal text}{fg=white}
  \setbeamercolor{frametitle}{fg=white}
  \setbeamercolor{itemize item}{fg=white}
  \setbeamercolor{item}{fg=white}
  \setbeamercolor{subitem}{fg=white}
  \setbeamercolor{block body}{fg=white}
  \usebeamercolor[fg]{normal text}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\fill[color=ibmblack] (0, 0) rectangle (\the\paperwidth, 0.2\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}

% Code listing style
\newcommand{\setlststyle}{
  \lstset{ %
    basicstyle=\ttfamily\tiny\color{ibmblack},
    numberstyle=\color{ibmgray}, % the style that is used for the line-numbers
    commentstyle=\color{ibmdarkteal},    % comment style
    keywordstyle=\color{ibmdarkblue},% keyword style
    stringstyle=\color{ibmblue},     % string literal style
    identifierstyle=\color{ibmblack},
    rulecolor=\color{ibmblack},      % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
    % backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
    breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
    breaklines=true,                 % sets automatic line breaking
    captionpos=b,                    % sets the caption-position to bottom
    extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
    keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
    otherkeywords={*,...},           % if you want to add more keywords to the set
    numbersep=5pt,                   % how far the line-numbers are from the code
    showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
    showstringspaces=false,          % underline spaces within strings only
    showtabs=false,                  % show tabs within strings adding particular underscores
  }
}

% Code listing style
\newcommand{\setlststyledark}{
  \lstset{ %
    basicstyle=\ttfamily\tiny,
    numberstyle=\color{ibmgray}, % the style that is used for the line-numbers
    commentstyle=\color{ibmdarkteal},    % comment style
    keywordstyle=\color{ibmdarkblue},% keyword style
    stringstyle=\color{ibmgray},     % string literal style
    identifierstyle=\color{white},
    rulecolor=\color{white},      % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
    % backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
    breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
    breaklines=true,                 % sets automatic line breaking
    captionpos=b,                    % sets the caption-position to bottom
    extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
    keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
    otherkeywords={*,...},           % if you want to add more keywords to the set
    numbersep=5pt,                   % how far the line-numbers are from the code
    showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
    showstringspaces=false,          % underline spaces within strings only
    showtabs=false,                  % show tabs within strings adding particular underscores
  }
}

% Docker listing
% Source: https://github.com/bartimar/docker-lstlisting
\lstdefinelanguage{docker}{
  keywords={FROM, RUN, COPY, ADD, ENTRYPOINT, CMD,  ENV, ARG, WORKDIR, EXPOSE, LABEL, USER, VOLUME, STOPSIGNAL, ONBUILD, MAINTAINER},
  sensitive=false,
  comment=[l]{\#},
  morestring=[b]',
  morestring=[b]"
}

\mode<all>
